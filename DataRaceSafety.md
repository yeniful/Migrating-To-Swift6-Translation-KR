# 데이터 경쟁으로부터 안전하게 (Data Race Safety)
##### 데이터 경쟁(Data Race)이 없는 동시 코드를 구현하기 위해 Swift가 사용하는 기본 개념에 대해 알아봅니다.

이전에는 섬세한 런타임 동기화(Runtime Synchronization)를 통해 변경될 수 있는 상태(mutable state)를 수동으로 보호해야 했습니다. 프로그래머들은 `locks`, `queues`와 같은 도구들을 사용해서 데이터 경쟁을 막았습니다. 이와 같은 방식은 올바르게 하는 것도 어렵고, 시간이 지남에 따라 바르게 유지보수하는 것 또한 악명이 높을 정도로 어렵습니다. 또한 동기화가 필요한지 결정하는 것조차 어려울 수 있습니다. 최악의 경우, 안전하지 않은 코드는 런타임에서의 실패를 보장하지 않습니다. 부정확하고 예측할 수 없는 데이터 경쟁의 특성상, 매우 특이한 조건에서 문제가 발생할 수 있기 때문에 이러한 코드는 잘 동작하는 것처럼 보입니다.

데이터 경쟁은 한 스레드가 메모리에 접근하는 동안, 다른 스레드에 의해 해당 메모리에 변화가 생길 때 발생합니다. Swift 6 언어 모드는 컴파일 타임에 데이터 경쟁을 방지함으로써 해당 문제를 예방합니다.

> 중요  
여러분은 다른 언어에서 `async/await` 및 `actors`와 같은 구조를 접했을 수 있습니다.  
하지만 Swift에서의 해당 개념들은 다를 수 있으므로 주의해주세요.

## 데이터 격리 (Data Isolation)
`Swift Concurrency`(Swift 동시성) 시스템을 통해 컴파일러는 모든 변경될 수 있는 상태(mutable state)의 안전성을 확인하고 검증할 수 있습니다. 데이터 격리 (`Data Isolation`)라는 매커니즘을 통해 가능합니다. 데이터 격리는 변경될 수 있는 상태에 상호 배타적으로 접근하게 합니다. 데이터 격리는 `lock`과 유사한 개념인 '동기화'의 한 형태입니다. 그러나 `lock`과 달리, 데이터 격리는 컴파일 타임에 보호합니다.

여러분은 두 가지 방식으로 데이터 격리를 할 수 있습니다: 바로 static(정적)과 dynamic(동적) 방식입니다.

static이라는 용어는 런타임 상태의 영향을 받지 않는 프로그램 요소를 설명하는 데 사용됩니다. 함수 정의와 같은 이러한 정적 요소들은 키워드와 주석으로 구성됩니다. Swift Concurrency 시스템은 이들의 타입 시스템의 확장입니다. 여러분은 함수와 타입들을 정적으로 선언하고 있습니다. 격리는 이러한 정적 선언들의 일부가 될 수 있습니다.

그러나 타입 시스템만으로는 런타임 동작을 충분히 설명할 수 없는 경우들이 있습니다. 예를 들어 Swift 코드 외부에서 만들어진 Objective-C 선언의 경우 컴파일러에서 안전하게 사용하기에 정보가 충분하지 않을 수 있습니다. 이러한 상황을 위해 격리 요구 사항을 동적으로 표현할 수 있는 추가 기능이 있습니다.

정적/동적 데이터 격리시 컴파일러는 당신이 작성하는 Swift 코드에 데이터 경쟁이 없도록 보장합니다.

> 노트  
동적 격리(Dynamic isolation)사용에 대한 자세한 내용은 동적 격리 문서를 참고하세요.
